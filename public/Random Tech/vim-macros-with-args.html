<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[TIL] Vim macros in conjuction with the arglist</title>
    <!-- Fonts: Inter + JetBrains Mono -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <!-- Icons: Material Symbols Rounded -->
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,0,0" rel="stylesheet">
    <!-- Syntax Highlighting: highlight.js -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css" id="hljs-theme">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <link rel="stylesheet" href="/style.css">
    <script src="/script.js" defer></script>
</head>
<body>
    <!-- Mobile Menu Toggle -->
    <input type="checkbox" id="nav-toggle" class="nav-toggle">
    <!-- Sidebar Collapse Toggle (Desktop) -->
    <input type="checkbox" id="sidebar-collapse" class="sidebar-collapse-checkbox">
    
    <!-- Mobile Header -->
    <header class="mobile-header">
        <label for="nav-toggle" class="nav-button" aria-label="Toggle Menu">
            <span class="nav-icon"></span>
        </label>
        <a href="/" class="header-logo">Nakli.Tech</a>
        <button id="mobile-theme-btn" class="icon-btn mobile-theme-btn" aria-label="Toggle Theme">
            <span class="material-symbols-rounded">dark_mode</span>
        </button>
    </header>

    <div class="layout">
        <!-- Action Bar (Obsidian-style) -->
        <aside class="action-bar">
            <div class="action-bar__top">
                <label for="sidebar-collapse" class="icon-btn action-btn" title="Toggle Sidebar">
                    <span class="material-symbols-rounded sidebar-icon-collapsed">menu</span>
                    <span class="material-symbols-rounded sidebar-icon-expanded">menu_open</span>
                </label>
                <!-- Top actions (e.g., Search) -->
            </div>
            <div class="action-bar__bottom">
                <button id="theme-toggle-btn" class="icon-btn action-btn" title="Toggle Theme">
                    <span class="material-symbols-rounded">dark_mode</span>
                </button>
            </div>
        </aside>

        <!-- Sidebar Navigation -->
        <aside class="sidebar">
            <nav class="nav">
                <div class="nav-header">
                    <a href="/" class="nav-logo">Nakli.Tech</a>
                </div>
                <div class="nav-content">
                    <ul class="nav-list"><li class="nav-folder">
                <input type="checkbox" id="folder-Random-Tech" class="folder-checkbox">
                <label for="folder-Random-Tech" class="nav-header-label">
                  <span class="material-symbols-rounded folder-icon">chevron_right</span>
                  <span class="nav-label">Random Tech</span>
                </label>
                <ul class="nav-list"><li>
                <a href="/Random Tech/12-factor-app.html" class="nav-link file-link ">
                  <span class="material-symbols-rounded">description</span>
                  <span class="nav-label">12-factor-app</span>
                </a>
              </li><li>
                <a href="/Random Tech/bastion-servers.html" class="nav-link file-link ">
                  <span class="material-symbols-rounded">description</span>
                  <span class="nav-label">bastion-servers</span>
                </a>
              </li><li>
                <a href="/Random Tech/dns-over-tls.html" class="nav-link file-link ">
                  <span class="material-symbols-rounded">description</span>
                  <span class="nav-label">dns-over-tls</span>
                </a>
              </li><li>
                <a href="/Random Tech/understanding-procfs.html" class="nav-link file-link ">
                  <span class="material-symbols-rounded">description</span>
                  <span class="nav-label">understanding-procfs</span>
                </a>
              </li><li>
                <a href="/Random Tech/vim-macros-with-args.html" class="nav-link file-link is-active">
                  <span class="material-symbols-rounded">description</span>
                  <span class="nav-label">vim-macros-with-args</span>
                </a>
              </li><li>
                <a href="/Random Tech/why-dns-uses-udp-if-its-unreliable.html" class="nav-link file-link ">
                  <span class="material-symbols-rounded">description</span>
                  <span class="nav-label">why-dns-uses-udp-if-its-unreliable</span>
                </a>
              </li></ul>
              </li><li class="nav-folder">
                <input type="checkbox" id="folder-series" class="folder-checkbox">
                <label for="folder-series" class="nav-header-label">
                  <span class="material-symbols-rounded folder-icon">chevron_right</span>
                  <span class="nav-label">series</span>
                </label>
                <ul class="nav-list"><li>
                <a href="/series/ultimate-shell-scripting-part-I.html" class="nav-link file-link ">
                  <span class="material-symbols-rounded">description</span>
                  <span class="nav-label">ultimate-shell-scripting-part-I</span>
                </a>
              </li></ul>
              </li><li class="nav-folder">
                <input type="checkbox" id="folder-tutorials" class="folder-checkbox">
                <label for="folder-tutorials" class="nav-header-label">
                  <span class="material-symbols-rounded folder-icon">chevron_right</span>
                  <span class="nav-label">tutorials</span>
                </label>
                <ul class="nav-list"><li>
                <a href="/tutorials/bloom-filter.html" class="nav-link file-link ">
                  <span class="material-symbols-rounded">description</span>
                  <span class="nav-label">bloom-filter</span>
                </a>
              </li><li>
                <a href="/tutorials/gcloud-configurations.html" class="nav-link file-link ">
                  <span class="material-symbols-rounded">description</span>
                  <span class="nav-label">gcloud-configurations</span>
                </a>
              </li><li>
                <a href="/tutorials/my-vim-tmux-setup.html" class="nav-link file-link ">
                  <span class="material-symbols-rounded">description</span>
                  <span class="nav-label">my-vim-tmux-setup</span>
                </a>
              </li><li>
                <a href="/tutorials/mysql-physical-backup.html" class="nav-link file-link ">
                  <span class="material-symbols-rounded">description</span>
                  <span class="nav-label">mysql-physical-backup</span>
                </a>
              </li><li>
                <a href="/tutorials/python-collections-module.html" class="nav-link file-link ">
                  <span class="material-symbols-rounded">description</span>
                  <span class="nav-label">python-collections-module</span>
                </a>
              </li><li>
                <a href="/tutorials/setup-local-k8s-env-using-kind.html" class="nav-link file-link ">
                  <span class="material-symbols-rounded">description</span>
                  <span class="nav-label">setup-local-k8s-env-using-kind</span>
                </a>
              </li></ul>
              </li></ul>
                </div>
                <footer class="sidebar-footer">
                    <p>&copy; 2026 Nakli.Tech</p>
                    <p>Built with ‚ù§Ô∏è using <a href="https://github.com/shubhamoli/Patra" target="_blank">Patra</a></p>
                </footer>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <article class="markdown-body">
                <header class="page-header"><h1 class="page-title">[TIL] Vim macros in conjuction with the arglist</h1><div class="page-meta"><span class="page-date">19/02/2023</span><span class="page-read-time">3 min read</span><span class="page-words">409 words</span></div><div class="page-tags"><span class="tag">Vim</span><span class="tag">TIL</span></div></header>
                <p>&nbsp;
&nbsp;</p>
<p>Recently I was involved in a housekeeping task where we had to update versions of some dependencies in 80+ services and I came across a pretty cool way to achieve that using Vim idioms.</p>
<p>I already use Vim macros a lot on the daily basis but this was my first time I used them in conjuction with the <code>:args</code> and felt it&#39;s worth sharing.</p>
<p>&nbsp;</p>
<p>First, let&#39;s understand the mentioned terms.</p>
<p><strong>Vim Macros</strong></p>
<blockquote>
<p>In Vim, the word &quot;macro&quot; may refer to:<br>A sequence of commands recorded to a <a href="https://www.brianstorti.com/vim-registers/">register</a></p>
</blockquote>
<p><strong>Arg list</strong></p>
<blockquote>
<p>Args list is a set of files you specify before you run a command on those files. Unlike buffer list which is a list of all open files, in the Arg list files can be selectively added.</p>
</blockquote>
<p>&nbsp;</p>
<h2>Writing the Macro</h2>
<p>So the macro which I needed to write for my task was:</p>
<pre><code>&lt;Esc&gt;                             // enter normal mode
qa                                // start recording macro in register &quot;a&quot;
:%s/2022/2023                     // update copyright header
:%s/v0.7.9/v0.8.0                 // update version
:%s/perms\/v0.9.0/perms\/1.0.0    // another module update
q                                 // stop recording.
</code></pre>
<p>&nbsp;</p>
<p>Now in order to run this macro in all <code>.tf</code> files, let&#39;s load them in the arglist.</p>
<pre><code>:args **/.tf      // load .tf file to the argslist
:args             // view arglist
:argdo norm @a    // run macro stored in register &quot;a&quot; on all files in the arglist
:argdo update     // save all changes
</code></pre>
<p>&nbsp;</p>
<p>Once it&#39;s done, time to view our <code>git diff</code>.</p>
<pre><code class="language-git">$ git status
...
...
index 83ba5f1..47ea517 100644
--- a/main.tf
+++ b/main.tf
@@ -1,4 +1,4 @@
-/* Copyright (C) 2022 FooBar - All Rights Reserved
+/* Copyright (C) 2023 FooBar - All Rights Reserved
@@ -8,9 +8,9 @@
  */

 module &quot;foo&quot; {
-  source  = &quot;git::https://example.com/vpc.git?ref=refs/heads/branch-name?ref=v0.7.9&quot;
+  source  = &quot;git::https://example.com/vpc.git?ref=refs/heads/branch-name?ref=v0.8.0&quot;
 }

 module &quot;bar&quot; {
-  source  = &quot;git::https://example.com/vpc.git?ref=refs/heads/branch-name?ref=perms/v0.9.0¬®
+  source  = &quot;git::https://example.com/vpc.git?ref=refs/heads/branch-name?ref=perms/v1.0.0¬®
 }

...
...
--- a/gke/main.tf
+++ b/gke/main.tf
@@ -1,4 +1,4 @@
-/* Copyright (C) 2022 FooBar - All Rights Reserved
+/* Copyright (C) 2023 FooBar - All Rights Reserved
@@ -8,9 +8,9 @@
  */

 module &quot;foo&quot; {
-  source  = &quot;git::https://example.com/vpc.git?ref=refs/heads/branch-name?ref=v0.7.9&quot;
+  source  = &quot;git::https://example.com/vpc.git?ref=refs/heads/branch-name?ref=v0.8.0&quot;
 }
</code></pre>
<p>&nbsp;</p>
<p>Voila!, it worked üôå</p>
<p>&nbsp;</p>
<h3>P.S.</h3>
<p>Like everything else there are N number of ways to achieve what I just did with the combination of <code>:args</code> and Macros but this was my TIL moment, I really like the potential of it and felt worth sharing it.</p>
<p>&nbsp;
&nbsp;</p>
<p>--</p>
<p><strong>Ciao</strong></p>

            </article>
        </main>
        
        <!-- Overlay for mobile when menu is open -->
        <label for="nav-toggle" class="nav-overlay"></label>
    </div>
</body>
</html>
