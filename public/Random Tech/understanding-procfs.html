<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Understanding procfs</title>
    <!-- Fonts: Inter + JetBrains Mono -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <!-- Icons: Material Symbols Rounded -->
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,0,0" rel="stylesheet">
    <!-- Syntax Highlighting: highlight.js -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css" id="hljs-theme">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <link rel="stylesheet" href="/style.css">
    <script src="/script.js" defer></script>
</head>
<body>
    <!-- Mobile Menu Toggle -->
    <input type="checkbox" id="nav-toggle" class="nav-toggle">
    <!-- Sidebar Collapse Toggle (Desktop) -->
    <input type="checkbox" id="sidebar-collapse" class="sidebar-collapse-checkbox">
    
    <!-- Mobile Header -->
    <header class="mobile-header">
        <label for="nav-toggle" class="nav-button" aria-label="Toggle Menu">
            <span class="nav-icon"></span>
        </label>
        <a href="/" class="header-logo">Nakli.Tech</a>
        <button id="mobile-theme-btn" class="icon-btn mobile-theme-btn" aria-label="Toggle Theme">
            <span class="material-symbols-rounded">dark_mode</span>
        </button>
    </header>

    <div class="layout">
        <!-- Action Bar (Obsidian-style) -->
        <aside class="action-bar">
            <div class="action-bar__top">
                <label for="sidebar-collapse" class="icon-btn action-btn" title="Toggle Sidebar">
                    <span class="material-symbols-rounded sidebar-icon-collapsed">menu</span>
                    <span class="material-symbols-rounded sidebar-icon-expanded">menu_open</span>
                </label>
                <!-- Top actions (e.g., Search) -->
            </div>
            <div class="action-bar__bottom">
                <button id="theme-toggle-btn" class="icon-btn action-btn" title="Toggle Theme">
                    <span class="material-symbols-rounded">dark_mode</span>
                </button>
            </div>
        </aside>

        <!-- Sidebar Navigation -->
        <aside class="sidebar">
            <nav class="nav">
                <div class="nav-header">
                    <a href="/" class="nav-logo">Nakli.Tech</a>
                </div>
                <div class="nav-content">
                    <ul class="nav-list"><li class="nav-folder">
                <input type="checkbox" id="folder-Random-Tech" class="folder-checkbox">
                <label for="folder-Random-Tech" class="nav-header-label">
                  <span class="material-symbols-rounded folder-icon">chevron_right</span>
                  <span class="nav-label">Random Tech</span>
                </label>
                <ul class="nav-list"><li>
                <a href="/Random Tech/12-factor-app.html" class="nav-link file-link ">
                  <span class="material-symbols-rounded">description</span>
                  <span class="nav-label">12-factor-app</span>
                </a>
              </li><li>
                <a href="/Random Tech/bastion-servers.html" class="nav-link file-link ">
                  <span class="material-symbols-rounded">description</span>
                  <span class="nav-label">bastion-servers</span>
                </a>
              </li><li>
                <a href="/Random Tech/dns-over-tls.html" class="nav-link file-link ">
                  <span class="material-symbols-rounded">description</span>
                  <span class="nav-label">dns-over-tls</span>
                </a>
              </li><li>
                <a href="/Random Tech/understanding-procfs.html" class="nav-link file-link is-active">
                  <span class="material-symbols-rounded">description</span>
                  <span class="nav-label">understanding-procfs</span>
                </a>
              </li><li>
                <a href="/Random Tech/vim-macros-with-args.html" class="nav-link file-link ">
                  <span class="material-symbols-rounded">description</span>
                  <span class="nav-label">vim-macros-with-args</span>
                </a>
              </li><li>
                <a href="/Random Tech/why-dns-uses-udp-if-its-unreliable.html" class="nav-link file-link ">
                  <span class="material-symbols-rounded">description</span>
                  <span class="nav-label">why-dns-uses-udp-if-its-unreliable</span>
                </a>
              </li></ul>
              </li><li class="nav-folder">
                <input type="checkbox" id="folder-series" class="folder-checkbox">
                <label for="folder-series" class="nav-header-label">
                  <span class="material-symbols-rounded folder-icon">chevron_right</span>
                  <span class="nav-label">series</span>
                </label>
                <ul class="nav-list"><li>
                <a href="/series/ultimate-shell-scripting-part-I.html" class="nav-link file-link ">
                  <span class="material-symbols-rounded">description</span>
                  <span class="nav-label">ultimate-shell-scripting-part-I</span>
                </a>
              </li></ul>
              </li><li class="nav-folder">
                <input type="checkbox" id="folder-tutorials" class="folder-checkbox">
                <label for="folder-tutorials" class="nav-header-label">
                  <span class="material-symbols-rounded folder-icon">chevron_right</span>
                  <span class="nav-label">tutorials</span>
                </label>
                <ul class="nav-list"><li>
                <a href="/tutorials/bloom-filter.html" class="nav-link file-link ">
                  <span class="material-symbols-rounded">description</span>
                  <span class="nav-label">bloom-filter</span>
                </a>
              </li><li>
                <a href="/tutorials/gcloud-configurations.html" class="nav-link file-link ">
                  <span class="material-symbols-rounded">description</span>
                  <span class="nav-label">gcloud-configurations</span>
                </a>
              </li><li>
                <a href="/tutorials/my-vim-tmux-setup.html" class="nav-link file-link ">
                  <span class="material-symbols-rounded">description</span>
                  <span class="nav-label">my-vim-tmux-setup</span>
                </a>
              </li><li>
                <a href="/tutorials/mysql-physical-backup.html" class="nav-link file-link ">
                  <span class="material-symbols-rounded">description</span>
                  <span class="nav-label">mysql-physical-backup</span>
                </a>
              </li><li>
                <a href="/tutorials/python-collections-module.html" class="nav-link file-link ">
                  <span class="material-symbols-rounded">description</span>
                  <span class="nav-label">python-collections-module</span>
                </a>
              </li><li>
                <a href="/tutorials/setup-local-k8s-env-using-kind.html" class="nav-link file-link ">
                  <span class="material-symbols-rounded">description</span>
                  <span class="nav-label">setup-local-k8s-env-using-kind</span>
                </a>
              </li></ul>
              </li></ul>
                </div>
                <footer class="sidebar-footer">
                    <p>&copy; 2026 Nakli.Tech</p>
                    <p>Built with ❤️ using <a href="https://github.com/shubhamoli/Patra" target="_blank">Patra</a></p>
                </footer>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <article class="markdown-body">
                <header class="page-header"><h1 class="page-title">Understanding procfs</h1><div class="page-meta"><span class="page-date">04/11/2019</span><span class="page-read-time">5 min read</span><span class="page-words">947 words</span></div><div class="page-tags"><span class="tag">Linux</span></div></header>
                <p>&nbsp;</p>
<p><code>procfs</code> is a psuedo-filesystem present in many UNIX-like Operating systems.
It is used to access process related info without interacting with Kernel directly
(means no system calls). procfs is also a great example of one of the core UNIX
philosophy – <em>store data in flat files.</em></p>
<p>It is called <code>proc</code> filesystem, hence the suffix <em>fs</em>, because it stores
information in a file/directory based hierarchy and by default is mounted on <code>/proc</code> mount point.</p>
<p>&nbsp; 
&nbsp; </p>
<h2>It’s time to dig deeper</h2>
<p>Although, almost all UNIX-like OSs have procfs but still we’re specifically
digging into Linux’s implementation. In Linux, each process has its own
sub-directory (named with Process ID) inside <code>/proc</code> directory. Let’s say if a
process has <code>PID 1337</code> then its information will be stored in <code>/proc/1337/</code>
directory.</p>
<p><strong>so let’s explore /proc/1337</strong></p>
<pre><code class="language-bash"># # Note: This is not the entire tree, 
#         I&#39;ve shown only a few files and directories 
#
$ tree /proc/1337
/proc/1337
├── cmdline
├── cwd -&gt; /
├── environ
├── exe -&gt; /bin/dbus-daemon
├── fd
│   ├── 0 -&gt; /dev/null
│   ├── 1 -&gt; /dev/null
│   ├── 2 -&gt; /dev/null
├── fdinfo
│   ├── 0
│   ├── 1
│   ├── 2
├── gid_map
├── io
├── limits
├── map_files
│   ├── 400000-462000 -&gt; /bin/dbus-daemon
│   ├── 661000-663000 -&gt; /bin/dbus-daemon
│   ├── 7f7d069cd000-7f7d069d9000 -&gt; /lib64/libnss_files-2.17.so
├── maps
├── net
├── ns/
├── root -&gt; /
├── smaps
├── stat
├── status
├── task/
├── [tid]/
</code></pre>
<ul>
<li><p><strong>/proc/[pid]/cmdline</strong> – this file contains the complete command line which is
executed to start the program. For zombie processes, it is empty</p>
</li>
<li><p><strong>/proc/[pid]/cwd</strong> – this is the symlink to the current work directory of the
process</p>
</li>
<li><p><strong>/proc/[pid]/environ</strong> – contents of this file is the list of null-byte (‘\0’)
separated environment [variables] setup by the process</p>
</li>
<li><p><strong>/proc/[pid]/exe</strong> – a symlink to the original executable</p>
</li>
<li><p><strong>/proc/[pid]/fd/</strong> – this sub-directory contains one entry for each file, process
has open. It is a symlink to actual files. 0 is for standard-input, 1 is for
standard-output, 2 is for standard-error and others can be socket file
descriptor etc.</p>
</li>
<li><p><strong>/proc/[pid]/fdinfo/</strong> – contains info of each open file descriptor</p>
</li>
<li><p><strong>/proc/[pid]/uid_map,</strong> /proc/[pid]/gid_map – these files expose the mappings for
user and group IDs inside the user namespace for the process pid</p>
</li>
<li><p><strong>/proc/[pid]/io</strong> – contains the I/O stats of the process</p>
</li>
<li><p><strong>/proc/[pid]/limits</strong> – this file displays soft, hard limits for a process</p>
</li>
<li><p><strong>/proc/[pid]/maps, /proc/[pid]/map_files</strong> – A file containing the currently
mapped memory regions, their access permission, start and end address pairs,
etc.</p>
</li>
<li><p><strong>/proc/[pid]/net</strong> – all networking associated with the process can be found in
this file</p>
</li>
<li><p><strong>/proc/[pid]/ns/</strong> – this is a subdirectory containing one entry for each
namespace that supports being manipulated by setns</p>
</li>
<li><p><strong>/proc/[pid]/root</strong> – UNIX and Linux support the idea of a per-process root of
the filesystem, set by the chroot system call.  This file is a symbolic link
that points to the process’s root directory</p>
</li>
<li><p><strong>/prod/[pid]/smaps</strong> - This file shows memory consumption for each of the process&#39;s
mappings. We can get an idea about the memory footprint of the process.</p>
</li>
<li><p><strong>/proc/[pid]/stat</strong> – contains the current stats of the process like its state
(running, dead, zombie, etc), pid, ppid, start time, amount of time process
has been scheduled, etc. It is used by ps utility</p>
</li>
<li><p><strong>/proc/[pid]/status</strong> – more human readable form of /proc/[pid]/stat</p>
</li>
<li><p><strong>/proc/[pid]/task/</strong> – contains subdirectory for each thread started by process
and the file like hierarchy is same as /proc/[pid]</p>
</li>
<li><p><strong>/proc/[pid]/[tid]/</strong> – these subdirectories are not visible when iterating
through /proc (and thus are not visible when one uses ls) but they contain
numerical subdirectory for each running thread that is not a thread group
leader and hierarchy is same as /proc/[pid]/task/[tid]</p>
</li>
</ul>
<p>Now, let&#39;s see how we can information stored <code>/proc</code> directory to calculate total memory
being consumed by <code>php-fpm</code> workers.</p>
<pre><code class="language-bash"># loop over all pids of fpm workers
# cat /proc/$pid/smaps
# sum memory usage and print 

$ for pid in $(pgrep php-fpm); do \
&gt;          cat /proc/$pid/smaps; done | awk &#39;/Pss/ {mem += $2} END {print mem, &quot;kB&quot;}&#39;

123309kB
</code></pre>
<p>Apart from per-process information. <code>procfs</code> contains some very important
non-process level information too.</p>
<p>Some of them are:</p>
<ul>
<li><p><strong>/proc/sys/kernel/pid_max</strong> – File contains the “number” representing the of
maximum no. of processes your system can allow</p>
</li>
<li><p><strong>/proc/cmdline</strong> – Contains arguments passed to Kernel during boot time.</p>
</li>
<li><p><strong>/proc/cpuinfo</strong> – contains CPU info like vendor, cache size, CPU frequency, address
size, for each core/processor of your CPU</p>
</li>
<li><p><strong>/proc/filesystems</strong> – filesystems supported by Kernel</p>
</li>
<li><p><strong>/proc/loadavg</strong> – The first three fields in this file are load average figures
giving the number of jobs in the run queue. It is used by uptime to load
average in last 1, 5, and 15 minutes</p>
</li>
<li><p><strong>/proc/meminfo</strong> – contains info of memory usage across system. It is used by
free utility to display memory info</p>
</li>
<li><p><strong>/proc/modules</strong> – contains list of modules that have been loaded by the system</p>
</li>
<li><p><strong>/proc/self</strong> – This directory refers to the process accessing the /proc
filesystem, and is identical to the /proc directory named by the process ID of
the same process</p>
</li>
</ul>
<p>&nbsp; 
&nbsp; </p>
<h2>Conclusion</h2>
<p><code>procfs</code> is the dumping yard of Kernel for almost all process related information
and few of its content are used/parsed by various programs like <code>ps</code>, <code>free</code>, <code>htop</code>, etc
to make it more human-readable, and once we learn how to explore it manually we
can get more in-depth information about processes running in our system.</p>
<p>Go! explore the <code>/proc/[pid]</code> directory of any process to know more
about it and even more you can learn more about procfs from <a href="http://man7.org/linux/man-pages/man5/proc.5.html">procfs man page</a>.</p>
<p>&nbsp;</p>
<p>#TillThenHappyCoding</p>

            </article>
        </main>
        
        <!-- Overlay for mobile when menu is open -->
        <label for="nav-toggle" class="nav-overlay"></label>
    </div>
</body>
</html>
