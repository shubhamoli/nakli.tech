<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Why DNS primarily uses UDP if it is un-reliable?</title>
    <!-- Fonts: Inter + JetBrains Mono -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <!-- Icons: Material Symbols Rounded -->
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,0,0" rel="stylesheet">
    <!-- Syntax Highlighting: highlight.js -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css" id="hljs-theme">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <link rel="stylesheet" href="/style.css">
    <script src="/script.js" defer></script>
</head>
<body>
    <!-- Mobile Menu Toggle -->
    <input type="checkbox" id="nav-toggle" class="nav-toggle">
    <!-- Sidebar Collapse Toggle (Desktop) -->
    <input type="checkbox" id="sidebar-collapse" class="sidebar-collapse-checkbox">
    
    <!-- Mobile Header -->
    <header class="mobile-header">
        <label for="nav-toggle" class="nav-button" aria-label="Toggle Menu">
            <span class="nav-icon"></span>
        </label>
        <a href="/" class="header-logo">Nakli.Tech</a>
        <button id="mobile-theme-btn" class="icon-btn mobile-theme-btn" aria-label="Toggle Theme">
            <span class="material-symbols-rounded">dark_mode</span>
        </button>
    </header>

    <div class="layout">
        <!-- Action Bar (Obsidian-style) -->
        <aside class="action-bar">
            <div class="action-bar__top">
                <label for="sidebar-collapse" class="icon-btn action-btn" title="Toggle Sidebar">
                    <span class="material-symbols-rounded sidebar-icon-collapsed">menu</span>
                    <span class="material-symbols-rounded sidebar-icon-expanded">menu_open</span>
                </label>
                <!-- Top actions (e.g., Search) -->
            </div>
            <div class="action-bar__bottom">
                <button id="theme-toggle-btn" class="icon-btn action-btn" title="Toggle Theme">
                    <span class="material-symbols-rounded">dark_mode</span>
                </button>
            </div>
        </aside>

        <!-- Sidebar Navigation -->
        <aside class="sidebar">
            <nav class="nav">
                <div class="nav-header">
                    <a href="/" class="nav-logo">Nakli.Tech</a>
                </div>
                <div class="nav-content">
                    <ul class="nav-list"><li class="nav-folder">
                <input type="checkbox" id="folder-Random-Tech" class="folder-checkbox">
                <label for="folder-Random-Tech" class="nav-header-label">
                  <span class="material-symbols-rounded folder-icon">chevron_right</span>
                  <span class="nav-label">Random Tech</span>
                </label>
                <ul class="nav-list"><li>
                <a href="/Random Tech/12-factor-app.html" class="nav-link file-link ">
                  <span class="material-symbols-rounded">description</span>
                  <span class="nav-label">12-factor-app</span>
                </a>
              </li><li>
                <a href="/Random Tech/bastion-servers.html" class="nav-link file-link ">
                  <span class="material-symbols-rounded">description</span>
                  <span class="nav-label">bastion-servers</span>
                </a>
              </li><li>
                <a href="/Random Tech/dns-over-tls.html" class="nav-link file-link ">
                  <span class="material-symbols-rounded">description</span>
                  <span class="nav-label">dns-over-tls</span>
                </a>
              </li><li>
                <a href="/Random Tech/understanding-procfs.html" class="nav-link file-link ">
                  <span class="material-symbols-rounded">description</span>
                  <span class="nav-label">understanding-procfs</span>
                </a>
              </li><li>
                <a href="/Random Tech/vim-macros-with-args.html" class="nav-link file-link ">
                  <span class="material-symbols-rounded">description</span>
                  <span class="nav-label">vim-macros-with-args</span>
                </a>
              </li><li>
                <a href="/Random Tech/why-dns-uses-udp-if-its-unreliable.html" class="nav-link file-link is-active">
                  <span class="material-symbols-rounded">description</span>
                  <span class="nav-label">why-dns-uses-udp-if-its-unreliable</span>
                </a>
              </li></ul>
              </li><li class="nav-folder">
                <input type="checkbox" id="folder-series" class="folder-checkbox">
                <label for="folder-series" class="nav-header-label">
                  <span class="material-symbols-rounded folder-icon">chevron_right</span>
                  <span class="nav-label">series</span>
                </label>
                <ul class="nav-list"><li>
                <a href="/series/ultimate-shell-scripting-part-I.html" class="nav-link file-link ">
                  <span class="material-symbols-rounded">description</span>
                  <span class="nav-label">ultimate-shell-scripting-part-I</span>
                </a>
              </li></ul>
              </li><li class="nav-folder">
                <input type="checkbox" id="folder-tutorials" class="folder-checkbox">
                <label for="folder-tutorials" class="nav-header-label">
                  <span class="material-symbols-rounded folder-icon">chevron_right</span>
                  <span class="nav-label">tutorials</span>
                </label>
                <ul class="nav-list"><li>
                <a href="/tutorials/bloom-filter.html" class="nav-link file-link ">
                  <span class="material-symbols-rounded">description</span>
                  <span class="nav-label">bloom-filter</span>
                </a>
              </li><li>
                <a href="/tutorials/gcloud-configurations.html" class="nav-link file-link ">
                  <span class="material-symbols-rounded">description</span>
                  <span class="nav-label">gcloud-configurations</span>
                </a>
              </li><li>
                <a href="/tutorials/my-vim-tmux-setup.html" class="nav-link file-link ">
                  <span class="material-symbols-rounded">description</span>
                  <span class="nav-label">my-vim-tmux-setup</span>
                </a>
              </li><li>
                <a href="/tutorials/mysql-physical-backup.html" class="nav-link file-link ">
                  <span class="material-symbols-rounded">description</span>
                  <span class="nav-label">mysql-physical-backup</span>
                </a>
              </li><li>
                <a href="/tutorials/python-collections-module.html" class="nav-link file-link ">
                  <span class="material-symbols-rounded">description</span>
                  <span class="nav-label">python-collections-module</span>
                </a>
              </li><li>
                <a href="/tutorials/setup-local-k8s-env-using-kind.html" class="nav-link file-link ">
                  <span class="material-symbols-rounded">description</span>
                  <span class="nav-label">setup-local-k8s-env-using-kind</span>
                </a>
              </li></ul>
              </li></ul>
                </div>
                <footer class="sidebar-footer">
                    <p>&copy; 2026 Nakli.Tech</p>
                    <p>Built with ❤️ using <a href="https://github.com/shubhamoli/Patra" target="_blank">Patra</a></p>
                </footer>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <article class="markdown-body">
                <header class="page-header"><h1 class="page-title">Why DNS primarily uses UDP if it is un-reliable?</h1><div class="page-meta"><span class="page-date">30/08/2020</span><span class="page-read-time">3 min read</span><span class="page-words">490 words</span></div><div class="page-tags"><span class="tag">Networking</span></div></header>
                <p>&nbsp; &nbsp;</p>
<p>When somebody asks what&#39;s the primary difference between TCP and UDP, they
often get the following copy-pasta as the answer:</p>
<h6>UDP is connection-less and unreliable, whereas TCP is connection-oriented and highly-reliable protocol. Services which are required to be highly available should choose TCP over UDP. TCP offers congestion control, re-ordering of packets, ensuring delivery of packet . . .</h6>
<p>But we all know that DNS (one the core and highly reliable services of the
Internet) primarily uses UDP.</p>
<p>&nbsp;</p>
<h2>How come DNS is so reliable if it uses UDP?</h2>
<p>First of all, UDP is an &quot;unreliable&quot; protocol doesn&#39;t mean packets will be magically lost at
random, rather it implies that the protocol itself doesn&#39;t specify (unlike TCP) any formal mechanisms
for acknowledgements, retransmissions, packet re-ordering at end-hosts, error-correction, etc. </p>
<p>Due to the absence of these above-mentioned features, UDP remains very light-weight, cheap on resources,
and extremely fast in terms of performance.</p>
<p>Higher-order application-level protocols and DNS-Clients, using UDP as their base, are required (and are free) to implement their
own coping mechanisms for packet losses, error correction, etc., rather than being forced to use one specified in the protocol
itself.</p>
<p>For DNS, UDP is an ideal choice because:</p>
<ul>
<li><p><strong>UDP is cheap and fast</strong> which is the prime requirement for services like
DNS</p>
</li>
<li><p>DNS queries and replies are small and <strong>fit in a single UDP packet</strong> (under 512
bytes). </p>
<ul>
<li><p>Being a single packet, receiving this packet itself implies acknowledgment </p>
</li>
<li><p>and a single packet doesn&#39;t require any re-ordering mechanism</p>
</li>
<li><p>For a single packet no congestion control (offered by TCP) is required</p>
</li>
</ul>
</li>
<li><p>If a packet is lost or there is some delay in response (indistinguishable for
UDP anyway) <strong>retry mechanisms are implemented by DNS clients to get the answer</strong>
(either from same nameserver or from a different one if available).</p>
</li>
<li><p>Since UDP header contains checksum so the integrity of the response packet can be
easily verified</p>
</li>
</ul>
<p>&nbsp;</p>
<h2>But wait, DNS does not always use UDP</h2>
<ul>
<li><p>TCP is used when the response data size exceeds 512 bytes, or for tasks such as zone transfers.</p>
</li>
<li><p>Some libraries use persistent DNS (over TCP) instead of UDP to send multiple queries at once for faster response and this reducing latency</p>
</li>
<li><p>DNS over TLS (DoT) and DNS over HTTPS (DoH) which use TCP are already gaining traction. See
<a href="https://en.wikipedia.org/wiki/Domain_Name_System_Security_Extensions">DNS Security extensions - DNSSEC</a></p>
</li>
</ul>
<p>&nbsp;</p>
<h2>Takeaway</h2>
<p>UDP is un-reliable doesn&#39;t mean that packets are randomly routed to black hole
rather it implies that the Protocol itself doesn&#39;t specify any mechanisms for
acknowledgement, re-transmission of lost packets, error correction, etc.</p>
<p>It&#39;s all upto application-level protocols (using UDP as base) to implement their
own coping mechanisms for ensuring the reliability of the system.</p>
<p>DNS Clients are examples of such applications which implement their own custom behaviours to handle
packet losses, retry mechanisms and therefore works very reliabily in
conjuction with UDP.</p>
<p>&nbsp; &nbsp;</p>
<p>#HappyNetworking #ItsDNSAgain</p>

            </article>
        </main>
        
        <!-- Overlay for mobile when menu is open -->
        <label for="nav-toggle" class="nav-overlay"></label>
    </div>
</body>
</html>
