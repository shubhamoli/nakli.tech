<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Encrypt DNS queries with DNS-over-TLS</title>
    <!-- Fonts: Inter + JetBrains Mono -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <!-- Icons: Material Symbols Rounded -->
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,0,0" rel="stylesheet">
    <!-- Syntax Highlighting: highlight.js -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css" id="hljs-theme">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <link rel="stylesheet" href="/style.css">
    <script src="/script.js" defer></script>
</head>
<body>
    <!-- Mobile Menu Toggle -->
    <input type="checkbox" id="nav-toggle" class="nav-toggle">
    <!-- Sidebar Collapse Toggle (Desktop) -->
    <input type="checkbox" id="sidebar-collapse" class="sidebar-collapse-checkbox">
    
    <!-- Mobile Header -->
    <header class="mobile-header">
        <label for="nav-toggle" class="nav-button" aria-label="Toggle Menu">
            <span class="nav-icon"></span>
        </label>
        <a href="/" class="header-logo">Nakli.Tech</a>
        <button id="mobile-theme-btn" class="icon-btn mobile-theme-btn" aria-label="Toggle Theme">
            <span class="material-symbols-rounded">dark_mode</span>
        </button>
    </header>

    <div class="layout">
        <!-- Action Bar (Obsidian-style) -->
        <aside class="action-bar">
            <div class="action-bar__top">
                <label for="sidebar-collapse" class="icon-btn action-btn" title="Toggle Sidebar">
                    <span class="material-symbols-rounded sidebar-icon-collapsed">menu</span>
                    <span class="material-symbols-rounded sidebar-icon-expanded">menu_open</span>
                </label>
                <!-- Top actions (e.g., Search) -->
            </div>
            <div class="action-bar__bottom">
                <button id="theme-toggle-btn" class="icon-btn action-btn" title="Toggle Theme">
                    <span class="material-symbols-rounded">dark_mode</span>
                </button>
            </div>
        </aside>

        <!-- Sidebar Navigation -->
        <aside class="sidebar">
            <nav class="nav">
                <div class="nav-header">
                    <a href="/" class="nav-logo">Nakli.Tech</a>
                </div>
                <div class="nav-content">
                    <ul class="nav-list"><li class="nav-folder">
                <input type="checkbox" id="folder-Random-Tech" class="folder-checkbox">
                <label for="folder-Random-Tech" class="nav-header-label">
                  <span class="material-symbols-rounded folder-icon">chevron_right</span>
                  <span class="nav-label">Random Tech</span>
                </label>
                <ul class="nav-list"><li>
                <a href="/Random Tech/12-factor-app.html" class="nav-link file-link ">
                  <span class="material-symbols-rounded">description</span>
                  <span class="nav-label">12-factor-app</span>
                </a>
              </li><li>
                <a href="/Random Tech/bastion-servers.html" class="nav-link file-link ">
                  <span class="material-symbols-rounded">description</span>
                  <span class="nav-label">bastion-servers</span>
                </a>
              </li><li>
                <a href="/Random Tech/dns-over-tls.html" class="nav-link file-link is-active">
                  <span class="material-symbols-rounded">description</span>
                  <span class="nav-label">dns-over-tls</span>
                </a>
              </li><li>
                <a href="/Random Tech/understanding-procfs.html" class="nav-link file-link ">
                  <span class="material-symbols-rounded">description</span>
                  <span class="nav-label">understanding-procfs</span>
                </a>
              </li><li>
                <a href="/Random Tech/vim-macros-with-args.html" class="nav-link file-link ">
                  <span class="material-symbols-rounded">description</span>
                  <span class="nav-label">vim-macros-with-args</span>
                </a>
              </li><li>
                <a href="/Random Tech/why-dns-uses-udp-if-its-unreliable.html" class="nav-link file-link ">
                  <span class="material-symbols-rounded">description</span>
                  <span class="nav-label">why-dns-uses-udp-if-its-unreliable</span>
                </a>
              </li></ul>
              </li><li class="nav-folder">
                <input type="checkbox" id="folder-series" class="folder-checkbox">
                <label for="folder-series" class="nav-header-label">
                  <span class="material-symbols-rounded folder-icon">chevron_right</span>
                  <span class="nav-label">series</span>
                </label>
                <ul class="nav-list"><li>
                <a href="/series/ultimate-shell-scripting-part-I.html" class="nav-link file-link ">
                  <span class="material-symbols-rounded">description</span>
                  <span class="nav-label">ultimate-shell-scripting-part-I</span>
                </a>
              </li></ul>
              </li><li class="nav-folder">
                <input type="checkbox" id="folder-tutorials" class="folder-checkbox">
                <label for="folder-tutorials" class="nav-header-label">
                  <span class="material-symbols-rounded folder-icon">chevron_right</span>
                  <span class="nav-label">tutorials</span>
                </label>
                <ul class="nav-list"><li>
                <a href="/tutorials/bloom-filter.html" class="nav-link file-link ">
                  <span class="material-symbols-rounded">description</span>
                  <span class="nav-label">bloom-filter</span>
                </a>
              </li><li>
                <a href="/tutorials/gcloud-configurations.html" class="nav-link file-link ">
                  <span class="material-symbols-rounded">description</span>
                  <span class="nav-label">gcloud-configurations</span>
                </a>
              </li><li>
                <a href="/tutorials/my-vim-tmux-setup.html" class="nav-link file-link ">
                  <span class="material-symbols-rounded">description</span>
                  <span class="nav-label">my-vim-tmux-setup</span>
                </a>
              </li><li>
                <a href="/tutorials/mysql-physical-backup.html" class="nav-link file-link ">
                  <span class="material-symbols-rounded">description</span>
                  <span class="nav-label">mysql-physical-backup</span>
                </a>
              </li><li>
                <a href="/tutorials/python-collections-module.html" class="nav-link file-link ">
                  <span class="material-symbols-rounded">description</span>
                  <span class="nav-label">python-collections-module</span>
                </a>
              </li><li>
                <a href="/tutorials/setup-local-k8s-env-using-kind.html" class="nav-link file-link ">
                  <span class="material-symbols-rounded">description</span>
                  <span class="nav-label">setup-local-k8s-env-using-kind</span>
                </a>
              </li></ul>
              </li></ul>
                </div>
                <footer class="sidebar-footer">
                    <p>&copy; 2026 Nakli.Tech</p>
                    <p>Built with ‚ù§Ô∏è using <a href="https://github.com/shubhamoli/Patra" target="_blank">Patra</a></p>
                </footer>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <article class="markdown-body">
                <header class="page-header"><h1 class="page-title">Encrypt DNS queries with DNS-over-TLS</h1><div class="page-meta"><span class="page-date">07/04/2020</span><span class="page-read-time">3 min read</span><span class="page-words">580 words</span></div><div class="page-tags"><span class="tag">Networking</span></div></header>
                <p>&nbsp;
&nbsp;</p>
<p>In May 2016, IETF proposed a new standard <a href="https://tools.ietf.org/html/rfc7858">[RFC 7858]</a> 
for resolving DNS queries.
This new protocol defines how to resolve DNS queries over TLS a.k.a
DNS-over-TLS.</p>
<p>And, why not, <a href="https://w3techs.com/technologies/details/ce-httpsdefault">~60% of websites</a> 
have been already migrated to HTTPS and, nowadays
with all major browsers forcing webmasters to adopt to HTTPS, this trend will
likely to see unexpected high. But DNS query resolution, one of the foremost
step, when communicating to a host over the Internet is always plain since the
advent in late 80s which as a consequence exposed it to many attacks.</p>
<p>&nbsp;</p>
<h2>What is DNS-over-TLS (DoT)?</h2>
<p>DNS-over-TLS (DoT) is a security protocol to encrypt DNS queries in transit so
that nobody except end hosts can read them. As, TLS is used under-the-hood for
encrypting DNS questions and answers, eavesdropping of sensitive data or
man-in-the-middle attack (MITM attack) in general is easily avoided.</p>
<p>It works over TLS therefore relies on Public Key Infrastructure (PKI) to build
trust, ensure data integrity and data encryption with correct ciphers to
transfer data. To learn more on PKI see this and to learn more about TLS read
RFC 2246 and RFC 2346.</p>
<p>Many public resolvers like Cloudflare, Google, Quad9 are already supporting DNS
resolution over TLS but being a relatively new standard the transition is not so
smooth as the clients (except browsers) have to migrate their setup from non-TLS
to DNS-over-TLS.</p>
<p>Meanwhile, If a client can‚Äôt update their stack quickly due to some reason then
it can use a Proxy service to route non-TLS DNS questions to DNS-over-TLS. One
such project related to this is <a href="https://github.com/getdnsapi/stubby">Stubby</a> which routes your non-TLS to
DNS-over-TLS. Stubby can run as a daemon in your machine and act as a stub resolver.</p>
<p>{{&lt; figure src=&quot;/images/dns-over-tls-proxy.png&quot; title=&quot;DNS-over-TLS Proxy&quot; &gt;}}</p>
<p>&nbsp;</p>
<h2>DNS-over-HTTPS (DoH)</h2>
<p>Another alternate protocol to secure DNS resolution is DNS-over-HTTPS (DoH)
which is already integrated in latest versions of Firefox browser [Read Here for
more]</p>
<p><strong>Isn‚Äôt HTTPS also uses TLS under the hood? Why a separate standard?</strong></p>
<p>Yes, you are right, it definitely uses TLS for identification and encryption but
the minor detail here to note is that ‚Äì <em>DoH is designed to disguise DNS queries
by transporting them over generic https port 443.</em></p>
<p>What this means is instead of resolving queries over dedicated port (853 for
DNS-over-TLS) where every passing traffic is for-sure a DNS question/answer DoH
intermingles DNS queries with generic traffic and due to which certain exploits
specific to DNS resolution can be avoided easily.</p>
<p>Yeah, DoH has already received much criticism from many people pioneer in this
domain. So, we should stop the discussion right here üôÇ</p>
<p>&nbsp;</p>
<h2>Conclusion</h2>
<p>When DNS initially came into picture in late 80s, Internet was small and
security was not a major concern due to which DNS queries are always resolved in
plain sight for the past 3 decades. But sooner or later IETF realised this and
with DNSSEC they created few standards to secure the transfer of this sensitive
information.</p>
<p>Several protocols were designed and one of them is DNS-over-TLS which encrypts
DNS queries in transit and helps in mitigating Man-in-the-middle attack. It uses
already a proven standard, TLS and PKI, to achieve what is desired.</p>
<p>Although, all major public resolvers are already supporting DNS-over-TLS but
clients have to update themselves for a major transition. Several Browsers are
also doing their part to integrate the protocol and one such example is
integration of DNS-over-HTTPS (DoH) by firefox browser.</p>
<p>&nbsp;</p>
<p>#StaySafe #HappyCoding</p>

            </article>
        </main>
        
        <!-- Overlay for mobile when menu is open -->
        <label for="nav-toggle" class="nav-overlay"></label>
    </div>
</body>
</html>
